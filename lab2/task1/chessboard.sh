#!/bin/bash
# chessboard.sh
# Рисует шахматную доску в консоли с использованием ANSI-кодов.
# Использование:
#   ./chessboard.sh        -> интерактивно спросит размер
#   ./chessboard.sh 8      -> сразу нарисует 8x8
# -------------------------------------------------

# Цвета фона (ANSI). Измените при желании.
BG_A="\033[47m"   # фон A (белый)
BG_B="\033[40m"   # фон B (чёрный)
RESET="\033[0m"

# Клетка: два пробела, чтобы клетка выглядела "более квадратной"
CELL="  "

# Функция для проверки, является ли аргумент положительным целым числом
is_positive_int() {
    [[ "$1" =~ ^[1-9][0-9]*$ ]]
}

# Получение размера: либо аргумент, либо интерактивно
if [ -n "$1" ]; then
    if ! is_positive_int "$1"; then
        echo "Ошибка: аргумент должен быть положительным целым числом."
        exit 1
    fi
    N="$1"
else
    while true; do
        read -p "Введите размер доски (например, 8) или q для выхода: " s
        s=${s//[[:space:]]/}   # убрать пробелы
        case "$s" in
            q|Q|quit|exit) echo "Выход."; exit 0 ;;
            *)
                if is_positive_int "$s"; then
                    N="$s"
                    break
                else
                    echo "Неверный ввод — введите положительное целое число."
                fi
                ;;
        esac
    done
fi

# Рисуем доску.
# Для более квадратного вида повторим печать каждой строки дважды (по высоте).
for (( row=0; row<N; row++ )); do
    # печатаем строку (верхняя часть клетки)
    for (( col=0; col<N; col++ )); do
        if (( (row + col) % 2 == 0 )); then
            echo -ne "${BG_A}${CELL}${RESET}"
        else
            echo -ne "${BG_B}${CELL}${RESET}"
        fi
    done
    echo
    # повторяем строку (нижняя часть клетки) — необязательно, но делает клетки ближе к квадрату
    for (( col=0; col<N; col++ )); do
        if (( (row + col) % 2 == 0 )); then
            echo -ne "${BG_A}${CELL}${RESET}"
        else
            echo -ne "${BG_B}${CELL}${RESET}"
        fi
    done
    echo
done
